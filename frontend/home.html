<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Island Trails - The Soul of Sri Lanka</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <!-- START: FONT & STYLE CHANGES -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@700&family=Lato:wght@400;700&display=swap" rel="stylesheet">
  <!-- END: FONT & STYLE CHANGES -->
  <style>
    /* --- START: ELEGANT SUNSET THEME (UI/UX REVAMP) --- */
    
    /* --- Theme Variables --- */
    :root {
      --dark-background: #2c211d; /* Deep, warm brown from image shadows */
      --accent-gold: #ff7b00; /* Fiery orange from the sunset's heart */
      --light-background: #fffaf0; /* Warm, sandy off-white */
      --text-dark: #3d3d3d; /* Softer, warm black for text */
      --text-light: #f5f5f5; /* Clean off-white for dark backgrounds */
      --heading-font: 'Playfair Display', serif;
      --body-font: 'Lato', sans-serif;
    }

    body {
      margin: 0;
      font-family: var(--body-font);
      background: var(--light-background);
      color: var(--text-dark);
      -webkit-font-smoothing: antialiased; /* Improves font rendering */
    }

    /* 1. Immersive Hero Header using the provided image */
    header {
      color: var(--text-light);
      padding: 0 0 5rem 0;
      position: relative;
      min-height: 90vh;
      display: flex;
      flex-direction: column;
      overflow: hidden;
    }
    .hero-bg-slideshow {
      position: absolute;
      top: 0; left: 0; width: 100%; height: 100%;
      z-index: 0;
    }
    .hero-bg-slide {
      position: absolute;
      top: 0; left: 0; width: 100%; height: 100%;
      background-size: cover;
      background-position: center;
      opacity: 0;
      transition: opacity 1.2s cubic-bezier(.4,0,.2,1);
    }
    .hero-bg-slide.active {
      opacity: 1;
      z-index: 1;
    }
    
    .nav {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 2rem 7vw;
      background: linear-gradient(to bottom, rgba(0,0,0,0.4), transparent); /* Subtle gradient for readability */
    }
    .nav .logo {
      font-family: var(--heading-font);
      font-size: 2rem;
      letter-spacing: 1px;
      color: var(--text-light);
    }
    .nav ul {
      list-style: none;
      display: flex;
      gap: 32px;
      margin: 0;
      padding: 0;
    }
    .nav ul li a {
      color: var(--text-light);
      text-decoration: none;
      font-weight: 700;
      transition: color 0.3s;
      position: relative;
      padding-bottom: 4px;
    }
    .nav ul li a::after { /* Elegant underline hover effect */
      content: '';
      position: absolute;
      width: 0;
      height: 2px;
      bottom: 0;
      left: 0;
      background-color: var(--accent-gold);
      transition: width 0.3s ease-out;
    }
    .nav ul li a:hover::after {
      width: 100%;
    }
    .nav ul li a.login-btn {
      background: var(--accent-gold);
      color: #fff;
      padding: 10px 20px;
      border-radius: 5px;
      transition: background 0.3s;
    }
    .nav ul li a.login-btn:hover {
      background: #e66f00;
      color: #fff;
    }
    .nav ul li a.login-btn::after {
        display: none; /* No underline for button */
    }

    .hero {
      text-align: center;
      margin: auto; /* Vertically and horizontally center */
      position: relative;
    }
    .hero-title {
      font-family: var(--heading-font);
      font-size: clamp(2.5rem, 6vw, 4rem); /* Responsive font size */
      font-weight: 700;
      margin-bottom: 1rem;
      text-shadow: 2px 2px 8px rgba(0,0,0,0.6);
    }
    .hero-sub {
      font-size: clamp(1rem, 2.5vw, 1.3rem);
      margin-bottom: 2.5rem;
      color: rgba(245, 245, 245, 0.9);
      max-width: 600px;
      margin-left: auto;
      margin-right: auto;
      text-shadow: 1px 1px 4px rgba(0,0,0,0.6);
    }
    /* Removed the hero-img class as the image is now a background */

    .section {
      max-width: 1200px; /* Increased max-width for a wider feel */
      margin: 0 auto;
      padding: 6rem 2rem 0 2rem; /* Generous padding */
    }
    .section-title {
      font-family: var(--heading-font);
      font-size: 2.5rem;
      font-weight: 700;
      margin-bottom: 3rem;
      text-align: center;
      color: var(--dark-background);
    }
    
    .dest-card {
      background: #fff;
      border-radius: 16px; /* Softer radius */
      box-shadow: 0 8px 30px rgba(90, 58, 46, 0.1); /* Soft, warm shadow */
      overflow: hidden;
      width: 340px;
      display: flex;
      flex-direction: column;
      transition: transform 0.3s ease, box-shadow 0.3s ease;
    }
    .dest-card:hover {
      transform: translateY(-10px);
      box-shadow: 0 12px 40px rgba(90, 58, 46, 0.2);
    }
    .dest-card img {
      width: 100%;
      height: 200px;
      object-fit: cover;
    }
    .dest-card-content {
      padding: 24px;
      flex-grow: 1;
      display: flex;
      flex-direction: column;
    }
    .dest-card-title {
      font-family: var(--heading-font);
      font-size: 1.5rem;
      font-weight: 700;
      margin-bottom: 8px;
      color: var(--dark-background);
    }
    .dest-card-desc {
      font-size: 0.98rem;
      color: #666;
      line-height: 1.6;
      margin-bottom: 1rem;
    }
    .dest-card-price {
      font-size: 1.2rem;
      color: var(--accent-gold);
      font-weight: 700;
      margin-top: auto;
    }

    .events-section {
      background: #fdf5ea; /* A slightly different warm tone */
      padding: 6rem 0;
      margin-top: 6rem;
    }
    .events-slider {
      max-width: 1200px;
      margin: 0 auto;
      display: flex;
      gap: 32px;
      overflow-x: auto;
      padding: 0 2rem;
    }
    .event-card {
      background: #fff;
      border-radius: 16px;
      box-shadow: 0 8px 30px rgba(90, 58, 46, 0.08);
      min-width: 340px;
      max-width: 340px;
      margin-bottom: 12px;
      overflow: hidden;
    }
    /* Re-using dest-card styles for events for consistency */
    .event-card img { width: 100%; height: 180px; object-fit: cover; }
    .event-card .dest-card-content { padding: 20px; }
    .event-card .dest-card-title { font-size: 1.3rem; }

    .testimonial-card {
      background: var(--light-background);
      border-radius: 16px;
      border-left: 5px solid var(--accent-gold); /* Elegant accent border */
      box-shadow: 0 8px 30px rgba(90, 58, 46, 0.1);
      padding: 2rem;
      width: 340px;
      text-align: left; /* More professional alignment */
    }
    .testimonial-card .review {
      font-size: 1.05rem;
      color: var(--text-dark);
      margin-bottom: 1.5rem;
      line-height: 1.7;
      font-style: italic;
    }
    .testimonial-card .author-info {
        display: flex;
        align-items: center;
        gap: 15px;
    }
    .testimonial-card img {
      width: 60px;
      height: 60px;
      border-radius: 50%;
      object-fit: cover;
    }
    .testimonial-card .name {
      font-weight: 700;
      color: var(--dark-background);
      font-size: 1.1rem;
    }
    .testimonial-card .stars {
      color: var(--accent-gold);
      font-size: 1rem;
    }

    .cta-section {
      background: var(--dark-background);
      color: var(--text-light);
      text-align: center;
      padding: 6rem 2rem;
      margin-top: 6rem;
    }
    .cta-section h2 {
      font-family: var(--heading-font);
      font-size: 2.5rem;
      margin-bottom: 1rem;
    }
    .cta-section p {
        max-width: 600px;
        margin: 0 auto 2rem auto;
        line-height: 1.7;
        color: rgba(245, 245, 245, 0.9);
    }
    .cta-section button {
      background: var(--accent-gold);
      color: #fff;
      border: none;
      border-radius: 8px;
      font-size: 1.1rem;
      font-weight: 700;
      font-family: var(--body-font);
      padding: 18px 45px;
      cursor: pointer;
      transition: transform 0.2s ease, background 0.3s ease;
    }
    .cta-section button:hover {
      background: #e66f00;
      transform: scale(1.05);
    }

    .footer {
      background: #1f1815; /* Even darker for footer */
      color: #a0a0a0;
      text-align: center;
      padding: 2rem 0;
      font-size: 0.9rem;
    }
    .footer a {
      color: var(--accent-gold);
      text-decoration: none;
    }
    .footer a:hover {
        text-decoration: underline;
    }
    
    /* Responsive media queries remain largely the same, but will inherit the new elegant styles */
    .testimonials { display: flex; gap: 32px; flex-wrap: wrap; justify-content: center; }

    @media (max-width: 900px) {
      .dest-slider, .events-slider {
          flex-direction: column;
          align-items: center;
          overflow-x: hidden;
      }
      .testimonials {
        flex-direction: column;
        align-items: center;
      }
    }
    @media (max-width: 600px) {
      .section, .testimonials-section, .cta-section { padding: 3rem 1rem 0 1rem; }
      .nav { flex-direction: column; gap: 1rem; padding: 1.5rem; background: rgba(0,0,0,0.5); }
    }

    /* Custom scrollbar for the destination slider */
    .dest-slider::-webkit-scrollbar { height: 8px; background: #eaf2fb; }
    .dest-slider::-webkit-scrollbar-thumb { background: #b3c6e0; border-radius: 4px; }
    .dest-slider { scrollbar-color: #b3c6e0 #eaf2fb; }
    @media (max-width: 900px) {
      .dest-slider { gap: 14px; }
    }
    @media (max-width: 600px) {
      .dest-slider { gap: 8px; }
    }
  </style>
</head>
<body>
  <header>
    <div class="hero-bg-slideshow">
      <div class="hero-bg-slide active" style="background-image:url('https://images.pexels.com/photos/13667947/pexels-photo-13667947.jpeg');"></div>
      <div class="hero-bg-slide" style="background-image:url('https://images.pexels.com/photos/23338897/pexels-photo-23338897.jpeg');"></div>
      <div class="hero-bg-slide" style="background-image:url('https://i.ytimg.com/vi/Lyf5ar5-qfI/maxresdefault.jpg');"></div>
      <div class="hero-bg-slide" style="background-image:url('https://cdn.pixabay.com/photo/2017/06/29/18/37/sri-lanka-2455695_960_720.jpg');"></div>
      <div class="hero-bg-slide" style="background-image:url('https://www.wallpaperbetter.com/wallpaper/475/335/800/elephants-at-sunset-1080P-wallpaper.jpg');"></div>
    </div>
    <nav class="nav">
      <div class="logo" style="font-family: var(--heading-font); font-size: 2.2rem; font-weight: 900; color: var(--accent-gold); letter-spacing: 1px;">IslandTrails</div>
      <ul>
        <li><a href="#explore">Explore</a></li>
        <li><a href="#aboutus">About Us</a></li>
        <li><a href="#contactus">Contact Us</a></li>
        <li><a href="login.html" id="loginBtn" style="color:#ffd700;">Login</a></li>
        <li><a href="signup.html" id="signupBtn" style="color:#ff7b00;font-weight:700;">Signup</a></li>
      </ul>
    </nav>
    <div class="hero">
      <h1 class="hero-title">The Soul of the Indian Ocean</h1>
      <div class="hero-sub">Experience the timeless beauty and vibrant spirit of Sri Lanka.</div>
      <!-- The hero image is now the background of the <header> element -->
    </div>
  </header>

  <section class="section">
    <div class="section-title">Sri Lanka, the Pearl of the Indian Ocean</div>
    <div style="position:relative;">
      <button id="slideLeft" style="position:absolute;left:-30px;top:50%;transform:translateY(-50%);z-index:2;background:#1e3c72;color:#fff;border:none;border-radius:50%;width:38px;height:38px;font-size:1.5rem;cursor:pointer;box-shadow:0 2px 8px rgba(30,60,114,0.13);display:none;">&#8592;</button>
  <div class="dest-slider" id="packagesSlider" style="display:flex;overflow-x:auto;gap:24px;padding-bottom:8px;scroll-behavior:smooth;scrollbar-width:none;-ms-overflow-style:none;">
  <style>
    #packagesSlider::-webkit-scrollbar { display: none; }
  </style>
        <!-- Cards will be loaded here by JS -->
      </div>
      <!-- Package Details Modal -->
      <div id="packageDetailsModal" style="display:none;position:fixed;top:0;left:0;width:100vw;height:100vh;background:rgba(44,33,29,0.55);z-index:9999;align-items:center;justify-content:center;">
  <div style="background:#fff;max-width:950px;width:98vw;min-width:320px;min-height:640px;max-height:98vh;border-radius:18px;box-shadow:0 16px 48px rgba(44,33,29,0.22);padding:32px 28px;overflow:auto;position:relative;display:flex;flex-direction:row;gap:32px;align-items:stretch;">
          <div id="packageDetailsImage" style="flex:0 0 440px;max-width:440px;background:#f7fafd;display:flex;align-items:center;justify-content:center;border-radius:14px;overflow:hidden;min-height:440px;box-shadow:0 2px 12px rgba(30,60,114,0.08);padding:18px;">
            <!-- Image will be loaded here -->
          </div>
          <div style="flex:1;min-width:220px;display:flex;flex-direction:column;justify-content:center;background:#fcfcfc;border-radius:14px;padding:38px 32px 32px 32px;box-shadow:0 2px 12px rgba(30,60,114,0.06);position:relative;">
            <button onclick="closePackageDetailsModal()" style="position:absolute;top:18px;right:22px;background:none;border:none;font-size:2.2rem;color:#1e3c72;cursor:pointer;">&times;</button>
            <div id="packageDetailsContent"></div>
          </div>
        </div>
      </div>
      <button id="slideRight" style="position:absolute;right:-30px;top:50%;transform:translateY(-50%);z-index:2;background:#1e3c72;color:#fff;border:none;border-radius:50%;width:38px;height:38px;font-size:1.5rem;cursor:pointer;box-shadow:0 2px 8px rgba(30,60,114,0.13);display:none;">&#8594;</button>
    </div>
  </section>



  <section class="section testimonials-section">
    <div class="section-title">Stories from Our Travellers</div>
    <div class="testimonials">
      <div class="testimonial-card">
        <div class="review">“The Sigiriya tour was a dream. The guides were incredibly knowledgeable and the views were simply unforgettable. Island Trails handled everything perfectly.”</div>
        <div class="author-info">
            <img src="https://randomuser.me/api/portraits/men/32.jpg" alt="Traveler 1">
            <div>
                <div class="name">Nimal Perera</div>
                <div class="stars">★★★★★</div>
            </div>
        </div>
      </div>
      <div class="testimonial-card">
        <div class="review">“Our trip through the tea country and the train ride to Ella was the highlight of our visit to Asia. Everything was so well organized. Highly recommended!”</div>
        <div class="author-info">
            <img src="https://randomuser.me/api/portraits/women/44.jpg" alt="Traveler 2">
            <div>
                <div class="name">Amanda Silva</div>
                <div class="stars">★★★★★</div>
            </div>
        </div>
      </div>
      <div class="testimonial-card">
        <div class="review">“From the easy booking process to the fantastic support on the ground, our time in Mirissa was paradise. Thank you, Island Trails, for the memories.”</div>
        <div class="author-info">
            <img src="https://randomuser.me/api/portraits/men/65.jpg" alt="Traveler 3">
            <div>
                <div class="name">Ruwan Jayasuriya</div>
                <div class="stars">★★★★★</div>
            </div>
        </div>
      </div>
    </div>
  </section>
   <section class="section" id="aboutus" style="margin-top:0;">
    <div class="section-title">About Us</div>
    <div style="max-width:800px;margin:0 auto;font-size:1.1rem;color:#1e3c72;text-align:center;line-height:1.7;">
      Island Trails is your trusted travel partner for discovering the wonders of Sri Lanka. With years of experience, our passionate team curates unique travel experiences, from ancient cities and lush tea plantations to golden beaches and vibrant festivals. We believe in responsible tourism, authentic adventures, and making every journey unforgettable. Join us and explore the Pearl of the Indian Ocean with confidence and joy!
    </div>
  </section>
  <section class="section" id="contactus" style="background:#eaf2fb;margin-top:24px;padding-bottom:48px;">
    <div class="section-title">Contact Us</div>
    <div style="max-width:900px;margin:0 auto;display:flex;flex-wrap:wrap;gap:36px;align-items:flex-start;justify-content:center;">
      <div style="flex:1;min-width:260px;max-width:340px;background:#fff;border-radius:12px;box-shadow:0 2px 12px rgba(30,60,114,0.07);padding:24px 18px 18px 18px;">
        <div style="font-size:1.08rem;color:#1e3c72;margin-bottom:18px;font-weight:600;">Get in Touch</div>
        <div style="margin-bottom:10px;"><b>Email:</b> <a href="mailto:info@islandtrails.com" style="color:#2a5298;">info@islandtrails.com</a></div>
        <div style="margin-bottom:10px;"><b>Phone:</b> <a href="tel:+94771234567" style="color:#2a5298;">+94 77 123 4567</a></div>
        <div style="margin-bottom:10px;"><b>Address:</b><br>Uva Wellassa University,<br>Passara Road,<br>Badulla, Sri Lanka</div>
        <div style="margin-top:18px;display:flex;gap:18px;">
          <a href="https://www.facebook.com/" target="_blank" style="color:#2a5298;text-decoration:none;font-size:1.7rem;display:inline-flex;align-items:center;" aria-label="Facebook">
            <svg width="28" height="28" viewBox="0 0 24 24" fill="currentColor"><path d="M22.675 0h-21.35C.595 0 0 .592 0 1.326v21.348C0 23.406.595 24 1.325 24h11.495v-9.294H9.692v-3.622h3.128V8.413c0-3.1 1.893-4.788 4.659-4.788 1.325 0 2.463.099 2.797.143v3.24l-1.918.001c-1.504 0-1.797.715-1.797 1.763v2.313h3.587l-.467 3.622h-3.12V24h6.116C23.406 24 24 23.406 24 22.674V1.326C24 .592 23.406 0 22.675 0"/></svg>
          </a>
          <a href="https://www.instagram.com/" target="_blank" style="color:#2a5298;text-decoration:none;font-size:1.7rem;display:inline-flex;align-items:center;" aria-label="Instagram">
            <svg width="28" height="28" viewBox="0 0 24 24" fill="currentColor"><path d="M12 2.163c3.204 0 3.584.012 4.85.07 1.366.062 2.633.334 3.608 1.308.974.974 1.246 2.241 1.308 3.608.058 1.266.069 1.646.069 4.85s-.012 3.584-.07 4.85c-.062 1.366-.334 2.633-1.308 3.608-.974.974-2.241 1.246-3.608 1.308-1.266.058-1.646.069-4.85.069s-3.584-.012-4.85-.07c-1.366-.062-2.633-.334-3.608-1.308-.974-.974-1.246-2.241-1.308-3.608C2.175 15.747 2.163 15.367 2.163 12s.012-3.584.07-4.85c.062-1.366.334-2.633 1.308-3.608C4.515 2.497 5.782 2.225 7.148 2.163 8.414 2.105 8.794 2.163 12 2.163zm0-2.163C8.741 0 8.332.012 7.052.07 5.771.128 4.659.334 3.678 1.315c-.98.98-1.187 2.092-1.245 3.373C2.012 5.668 2 6.077 2 12c0 5.923.012 6.332.07 7.612.058 1.281.265 2.393 1.245 3.373.98.98 2.092 1.187 3.373 1.245C8.332 23.988 8.741 24 12 24s3.668-.012 4.948-.07c1.281-.058 2.393-.265 3.373-1.245.98-.98 1.187-2.092 1.245-3.373.058-1.28.07-1.689.07-7.612 0-5.923-.012-6.332-.07-7.612-.058-1.281-.265-2.393-1.245-3.373-.98-.98-2.092-1.187-3.373-1.245C15.668.012 15.259 0 12 0zm0 5.838a6.162 6.162 0 1 0 0 12.324 6.162 6.162 0 0 0 0-12.324zm0 10.162a3.999 3.999 0 1 1 0-7.998 3.999 3.999 0 0 1 0 7.998zm6.406-11.845a1.44 1.44 0 1 0 0 2.88 1.44 1.44 0 0 0 0-2.88z"/></svg>
          </a>
          <a href="https://twitter.com/" target="_blank" style="color:#2a5298;text-decoration:none;font-size:1.7rem;display:inline-flex;align-items:center;" aria-label="Twitter">
            <svg width="28" height="28" viewBox="0 0 24 24" fill="currentColor"><path d="M24 4.557a9.83 9.83 0 0 1-2.828.775 4.932 4.932 0 0 0 2.165-2.724c-.951.564-2.005.974-3.127 1.195a4.916 4.916 0 0 0-8.38 4.482C7.691 8.095 4.066 6.13 1.64 3.161c-.542.929-.856 2.01-.857 3.17 0 2.188 1.115 4.116 2.823 5.247a4.904 4.904 0 0 1-2.229-.616c-.054 2.281 1.581 4.415 3.949 4.89a4.936 4.936 0 0 1-2.224.084c.627 1.956 2.444 3.377 4.6 3.417A9.867 9.867 0 0 1 0 21.543a13.94 13.94 0 0 0 7.548 2.209c9.058 0 14.009-7.513 14.009-14.009 0-.213-.005-.425-.014-.636A10.012 10.012 0 0 0 24 4.557z"/></svg>
          </a>
        </div>
      </div>
      <div style="flex:1;min-width:260px;max-width:420px;background:#fff;border-radius:12px;box-shadow:0 2px 12px rgba(30,60,114,0.07);padding:18px 10px 10px 10px;display:flex;flex-direction:column;align-items:center;">
        <div style="font-size:1.08rem;color:#1e3c72;margin-bottom:10px;font-weight:600;">Our Location</div>
        <iframe src="https://www.google.com/maps?q=Uva+Wellassa+University,+Passara+Road,+Badulla,+Sri+Lanka&output=embed" width="100%" height="220" style="border:0;border-radius:8px;box-shadow:0 1px 6px rgba(30,60,114,0.08);" allowfullscreen="" loading="lazy" referrerpolicy="no-referrer-when-downgrade"></iframe>
      </div>
    </div>
  </section>

  <section class="cta-section">
    <h2>Begin Your Unforgettable Journey</h2>
    <p>Let us craft your perfect Sri Lankan adventure. Discover ancient wonders, pristine beaches, and a culture rich with warmth and hospitality. Your story begins here.</p>
    <button onclick="window.location.href='signup.html'">Start Planning Today</button>
  </section>

  <footer class="footer">
    &copy; 2025 Island Trails. All rights reserved. | <a href="mailto:info@islandtrails.com" style="color:#ffd700;">info@islandtrails.com</a>
  </footer>
 
  <!-- Booking Date Modal -->
  <div id="bookingDateModal" style="display:none;position:fixed;top:0;left:0;width:100vw;height:100vh;background:rgba(44,33,29,0.7);z-index:10000;align-items:center;justify-content:center;">
    <div style="background:#fff;max-width:450px;width:90vw;border-radius:16px;box-shadow:0 16px 48px rgba(44,33,29,0.3);padding:32px;position:relative;">
      <button onclick="closeBookingDateModal()" style="position:absolute;top:16px;right:20px;background:none;border:none;font-size:2rem;color:#999;cursor:pointer;line-height:1;">&times;</button>
      
      <div style="text-align:center;margin-bottom:24px;">
        <h3 style="color:#1e3c72;font-size:1.5rem;margin:0 0 8px 0;font-family:var(--heading-font);">Select Booking Date</h3>
        <p style="color:#666;margin:0;font-size:0.95rem;">Choose your preferred travel date for this package</p>
      </div>
      
      <div id="selectedPackageInfo" style="background:#f8f9fa;padding:16px;border-radius:8px;margin-bottom:20px;border-left:4px solid var(--accent-gold);">
        <!-- Package info will be populated here -->
      </div>
      
      <div style="margin-bottom:24px;">
        <label for="bookingDateInput" style="display:block;margin-bottom:8px;color:#333;font-weight:600;">Travel Date:</label>
        <input type="date" id="bookingDateInput" style="width:100%;padding:12px;border:2px solid #ddd;border-radius:8px;font-size:1rem;box-sizing:border-box;" required>
        <small style="color:#666;font-size:0.85rem;display:block;margin-top:6px;">Please select a date in the future</small>
      </div>
      
      <div style="display:flex;gap:12px;justify-content:flex-end;">
        <button onclick="closeBookingDateModal()" style="padding:12px 24px;background:#6c757d;color:white;border:none;border-radius:8px;cursor:pointer;font-size:0.95rem;">Cancel</button>
        <button onclick="confirmBooking()" style="padding:12px 24px;background:var(--accent-gold);color:white;border:none;border-radius:8px;cursor:pointer;font-size:0.95rem;font-weight:600;">Book Now</button>
      </div>
    </div>
  </div>

  <script>
    // Hero background slideshow
    document.addEventListener('DOMContentLoaded', function() {
      const slides = document.querySelectorAll('.hero-bg-slide');
      let idx = 0;
      setInterval(() => {
        slides[idx].classList.remove('active');
        idx = (idx + 1) % slides.length;
        slides[idx].classList.add('active');
      }, 4200);
    });
    // Fetch and display packages as slider
    async function loadPackages() {
      const slider = document.getElementById('packagesSlider');
      slider.innerHTML = '<div style="color:#1e3c72;font-size:1.1rem;">Loading packages...</div>';
      try {
        const res = await fetch('http://localhost:8000/island-trails/packages/package/readAll');
        const data = await res.json();
        if (Array.isArray(data.data) && data.data.length > 0) {
          slider.innerHTML = '';
          data.data.forEach(pkg => {
            const card = document.createElement('div');
            card.className = 'dest-card';
            card.style.minWidth = '280px';
            card.style.maxWidth = '320px';
            card.style.flex = '0 0 auto';
            card.style.cursor = 'pointer';
            card.onclick = () => showPackageDetails(pkg.id);
            let bookNowBtn = '';
            // Only show Book Now if logged in as customer
            const token = localStorage.getItem('island_trails_token');
            const userRole = localStorage.getItem('user_role');
            if (token && userRole && userRole.toLowerCase() === 'customer') {
              bookNowBtn = `<button class="book-now-btn" data-pkgid="${pkg.id}" style="margin-top:16px;width:100%;padding:10px 0;background:linear-gradient(90deg,#ff7b00 60%,#ffb347 100%);color:#fff;border:none;border-radius:7px;font-size:1.08rem;font-weight:700;cursor:pointer;transition:background 0.2s;">Book Now</button>`;
            }
            card.innerHTML = `
              <img src="${pkg.image_url || 'https://images.unsplash.com/photo-1506744038136-46273834b3fb?auto=format&fit=crop&w=600&q=80'}" alt="${pkg.title}">
              <div class="dest-card-content">
                <div class="dest-card-title">${pkg.title || 'Untitled Package'}</div>
                <div class="dest-card-desc">${pkg.description ? pkg.description.substring(0, 90) + (pkg.description.length > 90 ? '...' : '') : 'No description.'}</div>
                <div class="dest-card-price">From LKR ${pkg.price || 'N/A'}</div>
                ${bookNowBtn}
              </div>
            `;
            slider.appendChild(card);
          });
          // Add event listeners for Book Now buttons
          document.querySelectorAll('.book-now-btn').forEach(btn => {
            btn.addEventListener('click', async function(e) {
              e.stopPropagation();
              const pkgId = this.getAttribute('data-pkgid');
              const token = localStorage.getItem('island_trails_token');
              if (!token) {
                alert('You must be logged in as a customer to book.');
                return;
              }
              
              // Find the package data for the modal
              const packageData = data.data.find(pkg => pkg.id == pkgId);
              if (packageData) {
                showBookingDateModal(packageData);
              }
            });
          });
          document.getElementById('slideLeft').style.display = 'block';
          document.getElementById('slideRight').style.display = 'block';
        } else {
          slider.innerHTML = '<div style="color:#c00;">No packages found.</div>';
        }
      } catch (e) {
        slider.innerHTML = '<div style="color:#c00;">Failed to load packages.</div>';
      }
    }

    async function showPackageDetails(packageId) {
      const modal = document.getElementById('packageDetailsModal');
      const content = document.getElementById('packageDetailsContent');
      const imageDiv = document.getElementById('packageDetailsImage');
      content.innerHTML = '<div style="text-align:center;padding:32px 0;">Loading...</div>';
      imageDiv.innerHTML = '';
      modal.style.display = 'flex';
      try {
        const res = await fetch('http://localhost:8000/island-trails/packages/package/read', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ id: packageId })
        });
        const data = await res.json();
        if (data.status === 'success' && data.data) {
          const pkg = data.data;
          imageDiv.innerHTML = `<img src="${pkg.image_url || 'https://images.unsplash.com/photo-1506744038136-46273834b3fb?auto=format&fit=crop&w=600&q=80'}" alt="${pkg.title}" style="width:100%;height:400px;max-width:400px;object-fit:cover;border-radius:12px;box-shadow:0 4px 18px rgba(44,33,29,0.13);">`;
          content.innerHTML = `
            <div style="font-size:2.2rem;font-weight:900;color:#1e3c72;margin-bottom:18px;line-height:1.1;letter-spacing:-1px;">${pkg.title}</div>
            <div style="color:#444;font-size:1.18rem;margin-bottom:26px;line-height:1.7;max-height:340px;min-height:120px;overflow:auto;">${pkg.description}</div>
            <div style="display:flex;gap:32px;margin-bottom:28px;align-items:center;">
              <div style="background:#fff7e6;padding:18px 32px;border-radius:12px;box-shadow:0 1px 4px rgba(255,123,0,0.08);font-size:1.18rem;min-width:120px;text-align:center;border:1.5px solid #ffe0b2;">
                <span style="color:#ff7b00;font-weight:700;">Price</span><br>
                <span style="font-size:1.35rem;font-weight:900;">LKR ${pkg.price}</span>
              </div>
              <div style="background:#eaf2fb;padding:18px 32px;border-radius:12px;box-shadow:0 1px 4px rgba(30,60,114,0.06);font-size:1.18rem;min-width:120px;text-align:center;border:1.5px solid #b3c6e0;">
                <span style="color:#2563eb;font-weight:700;">Duration</span><br>
                <span style="font-size:1.22rem;font-weight:900;">${pkg.duration}</span>
              </div>
            </div>
            <div style="font-size:1.08rem;color:#888;margin-top:10px;">Added: <span style="color:#1e3c72;font-weight:600;">${pkg.created_at}</span></div>
          `;
        } else {
          content.innerHTML = '<div style="color:#c00;padding:32px 0;">Failed to load package details.</div>';
        }
      } catch (e) {
        content.innerHTML = '<div style="color:#c00;padding:32px 0;">Failed to load package details.</div>';
      }
    }

    function closePackageDetailsModal() {
      document.getElementById('packageDetailsModal').style.display = 'none';
    }

    // Booking Date Modal Functions
    let selectedPackageForBooking = null;

    function showBookingDateModal(packageData) {
      selectedPackageForBooking = packageData;
      const modal = document.getElementById('bookingDateModal');
      const packageInfo = document.getElementById('selectedPackageInfo');
      const dateInput = document.getElementById('bookingDateInput');
      
      // Populate package info
      packageInfo.innerHTML = `
        <div style="font-weight:600;color:#1e3c72;margin-bottom:4px;">${packageData.title}</div>
        <div style="color:#666;font-size:0.9rem;">Price: <span style="color:var(--accent-gold);font-weight:600;">LKR ${packageData.price}</span></div>
      `;
      
      // Set minimum date to tomorrow
      const tomorrow = new Date();
      tomorrow.setDate(tomorrow.getDate() + 1);
      const minDate = tomorrow.toISOString().split('T')[0];
      dateInput.min = minDate;
      dateInput.value = minDate; // Default to tomorrow
      
      modal.style.display = 'flex';
    }

    function closeBookingDateModal() {
      document.getElementById('bookingDateModal').style.display = 'none';
      selectedPackageForBooking = null;
    }

    async function confirmBooking() {
      const dateInput = document.getElementById('bookingDateInput');
      const selectedDate = dateInput.value;
      
      if (!selectedDate) {
        alert('Please select a booking date.');
        return;
      }
      
      // Validate date is in the future
      const selectedDateTime = new Date(selectedDate);
      const today = new Date();
      today.setHours(0, 0, 0, 0);
      
      if (selectedDateTime <= today) {
        alert('Please select a future date for your booking.');
        return;
      }
      
      if (!selectedPackageForBooking) {
        alert('Package information not found. Please try again.');
        return;
      }
      
      const token = localStorage.getItem('island_trails_token');
      if (!token) {
        alert('You must be logged in to make a booking.');
        return;
      }
      
      // Disable the confirm button to prevent double-booking
      const confirmBtn = event.target;
      const originalText = confirmBtn.textContent;
      confirmBtn.disabled = true;
      confirmBtn.textContent = 'Booking...';
      
      try {
        const response = await fetch('http://localhost:8000/island-trails/bookings/booking/create', {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json',
            'Authorization': 'Bearer ' + token
          },
          body: JSON.stringify({ 
            package_id: Number(selectedPackageForBooking.id), 
            booking_date: selectedDate 
          })
        });
        
        const data = await response.json();
        
        if (data.status === 'success') {
          alert(`Booking created successfully!\n\nBooking ID: ${data.data.id}\nPackage: ${data.data.package_title}\nDate: ${selectedDate}\nStatus: ${data.data.status}.`);
          closeBookingDateModal();
        } else {
          alert(data.message || 'Failed to create booking. Please try again.');
        }
      } catch (err) {
        console.error('Booking error:', err);
        alert('Network or server error. Please check your connection and try again.');
      } finally {
        // Re-enable the button
        confirmBtn.disabled = false;
        confirmBtn.textContent = originalText;
      }
    }
    window.addEventListener('DOMContentLoaded', loadPackages);
    // Slider controls and auto-scroll
    document.addEventListener('DOMContentLoaded', function() {
      const slider = document.getElementById('packagesSlider');
      document.getElementById('slideLeft').onclick = function() {
        slider.scrollBy({ left: -320, behavior: 'smooth' });
      };
      document.getElementById('slideRight').onclick = function() {
        slider.scrollBy({ left: 320, behavior: 'smooth' });
      };

      // Auto-scroll (continuous, looping)
      let autoScrollTimeout;
      let isPaused = false;
      const cardWidth = 320 + 24; // card width + gap (adjust if needed)
      function slideToNextCard() {
        if (!slider) return;
        // If at (or near) end, go back to start after a pause
        if (slider.scrollLeft + slider.offsetWidth >= slider.scrollWidth - 10) {
          isPaused = true;
          autoScrollTimeout = setTimeout(() => {
            slider.scrollTo({ left: 0, behavior: 'smooth' });
            setTimeout(() => {
              isPaused = false;
              slideToNextCard();
            }, 800); // Pause after jump to start
          }, 1200); // Pause at end before jumping
        } else {
          slider.scrollBy({ left: cardWidth, behavior: 'smooth' });
          autoScrollTimeout = setTimeout(slideToNextCard, 1800); // Pause between cards
        }
      }
      slideToNextCard();

      // Pause on hover
      slider.addEventListener('mouseenter', () => { clearTimeout(autoScrollTimeout); });
      slider.addEventListener('mouseleave', () => { if (!isPaused) slideToNextCard(); });

      // Check if user is logged in and update login button
      checkLoginStatus();
    });
    
    // Function to check login status and update navigation
    function checkLoginStatus() {
      const token = localStorage.getItem('island_trails_token');
      const userRole = localStorage.getItem('user_role');
      const userName = localStorage.getItem('user_name');
      const loginBtn = document.getElementById('loginBtn');
      
      if (token && loginBtn) {
        if (userRole === 'admin' || userRole === 'Admin') {
          // Admin user - redirect to admin dashboard
          loginBtn.textContent = 'Dashboard';
          loginBtn.href = 'admin.html';
          loginBtn.title = 'Go to Admin Dashboard';
        } else {
          // Customer user - redirect to customer dashboard
          loginBtn.textContent = userName ? `Hi, ${userName}` : 'Dashboard';
          loginBtn.href = 'customer.html';
          loginBtn.title = 'Go to Customer Dashboard';
        }
      }
    }
  </script>
</body>
</html>